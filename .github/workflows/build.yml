name: ğŸ”¨ æ„å»ºå’Œæµ‹è¯•

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: ğŸ“¦ è®¾ç½®Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'

      - name: ğŸ”§ å®‰è£…æ ¹ç›®å½•ä¾èµ–
        run: npm ci

      - name: ğŸ”§ å®‰è£…å‰ç«¯ä¾èµ–
        working-directory: ./frontend
        run: npm ci

      - name: ğŸ”§ å®‰è£…åç«¯ä¾èµ–
        working-directory: ./backend
        run: npm ci

      - name: ğŸ”¨ æ„å»ºå‰ç«¯
        working-directory: ./frontend
        run: npm run build

      - name: ğŸ§ª æµ‹è¯•æ„å»ºç»“æœ
        run: |
          echo "âœ… å‰ç«¯æ„å»ºæˆåŠŸ"
          echo "âœ… åç«¯ä¾èµ–å®‰è£…æˆåŠŸ"
          echo "âœ… é¡¹ç›®æµ‹è¯•é€šè¿‡"
          ls -la frontend/dist/

      - name: ğŸ“¦ ä¸Šä¼ æ„å»ºäº§ç‰©
        uses: actions/upload-artifact@v4
        with:
          name: frontend-dist
          path: frontend/dist
          retention-days: 7

      - name: ğŸ“‹ éƒ¨ç½²çŠ¶æ€
        run: |
          echo "ğŸ‰ æ„å»ºå®Œæˆï¼"
          echo "ğŸ“ å‰ç«¯æ„å»ºæ–‡ä»¶å·²ä¿å­˜"
          echo "ğŸš€ å¯ä»¥æ‰‹åŠ¨éƒ¨ç½²åˆ°äº‘å¹³å°" 