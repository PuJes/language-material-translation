<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€‰æ‹©å™¨è°ƒè¯•é¡µé¢</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/antd@5.26.5/dist/reset.css">
    <link rel="stylesheet" href="https://unpkg.com/antd@5.26.5/dist/antd.css">
    <script src="https://unpkg.com/antd@5.26.5/dist/antd.js"></script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px;
        }
        
        .debug-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }
        
        .debug-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 2px solid #f0f0f0;
            border-radius: 8px;
        }
        
        .debug-title {
            color: #667eea;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .test-result {
            margin-top: 12px;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .test-success {
            background: #f6ffed;
            border: 1px solid #b7eb8f;
            color: #52c41a;
        }
        
        .test-error {
            background: #fff2f0;
            border: 1px solid #ffccc7;
            color: #ff4d4f;
        }
        
        .level-selector {
            width: 100%;
            height: 50px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Select, Button, Card, Space, Typography, Row, Col } = antd;
        const { Title, Text } = Typography;
        const { Option } = Select;

        function DebugApp() {
            const [englishLevel, setEnglishLevel] = useState('');
            const [testResults, setTestResults] = useState([]);
            const [isDropdownOpen, setIsDropdownOpen] = useState(false);

            const levelOptions = [
                { value: 'CET-4', label: 'ğŸ¯ è‹±è¯­å››çº§ (CET-4)', description: 'åŸºç¡€è¯æ±‡ä¸è¯­æ³•' },
                { value: 'CET-6', label: 'ğŸš€ è‹±è¯­å…­çº§ (CET-6)', description: 'è¿›é˜¶è¯æ±‡ä¸è¡¨è¾¾' },
                { value: 'IELTS', label: 'ğŸŒ é›…æ€ (IELTS)', description: 'å›½é™…è‹±è¯­æ°´å¹³' },
                { value: 'TOEFL', label: 'ğŸ“ æ‰˜ç¦ (TOEFL)', description: 'å­¦æœ¯è‹±è¯­èƒ½åŠ›' }
            ];

            const addTestResult = (result) => {
                setTestResults(prev => [...prev, {
                    time: new Date().toLocaleTimeString(),
                    ...result
                }]);
            };

            const runTests = () => {
                setTestResults([]);
                
                // æµ‹è¯•1ï¼šé€‰æ‹©å™¨æ˜¯å¦å­˜åœ¨
                try {
                    const selector = document.querySelector('.ant-select');
                    if (selector) {
                        addTestResult({
                            test: 'é€‰æ‹©å™¨DOMå…ƒç´ å­˜åœ¨',
                            status: 'success',
                            details: 'âœ… æ‰¾åˆ°äº†.ant-selectå…ƒç´ '
                        });
                    } else {
                        addTestResult({
                            test: 'é€‰æ‹©å™¨DOMå…ƒç´ å­˜åœ¨',
                            status: 'error',
                            details: 'âŒ æœªæ‰¾åˆ°.ant-selectå…ƒç´ '
                        });
                    }
                } catch (e) {
                    addTestResult({
                        test: 'é€‰æ‹©å™¨DOMå…ƒç´ å­˜åœ¨',
                        status: 'error',
                        details: `âŒ é”™è¯¯: ${e.message}`
                    });
                }

                // æµ‹è¯•2ï¼šCSSæ ·å¼æ£€æŸ¥
                setTimeout(() => {
                    try {
                        const selector = document.querySelector('.ant-select');
                        const styles = window.getComputedStyle(selector);
                        addTestResult({
                            test: 'CSSæ ·å¼æ£€æŸ¥',
                            status: 'success',
                            details: `âœ… display: ${styles.display}, visibility: ${styles.visibility}, z-index: ${styles.zIndex}`
                        });
                    } catch (e) {
                        addTestResult({
                            test: 'CSSæ ·å¼æ£€æŸ¥',
                            status: 'error',
                            details: `âŒ é”™è¯¯: ${e.message}`
                        });
                    }
                }, 100);

                // æµ‹è¯•3ï¼šç‚¹å‡»äº‹ä»¶æ£€æŸ¥
                setTimeout(() => {
                    try {
                        const selector = document.querySelector('.ant-select-selector');
                        if (selector) {
                            selector.click();
                            
                            setTimeout(() => {
                                const dropdown = document.querySelector('.ant-select-dropdown');
                                if (dropdown && !dropdown.hidden) {
                                    addTestResult({
                                        test: 'ä¸‹æ‹‰æ¡†æ˜¾ç¤ºæµ‹è¯•',
                                        status: 'success',
                                        details: 'âœ… ç‚¹å‡»åä¸‹æ‹‰æ¡†æ­£å¸¸æ˜¾ç¤º'
                                    });
                                } else {
                                    addTestResult({
                                        test: 'ä¸‹æ‹‰æ¡†æ˜¾ç¤ºæµ‹è¯•',
                                        status: 'error',
                                        details: 'âŒ ç‚¹å‡»åä¸‹æ‹‰æ¡†æœªæ˜¾ç¤º'
                                    });
                                }
                            }, 500);
                        }
                    } catch (e) {
                        addTestResult({
                            test: 'ä¸‹æ‹‰æ¡†æ˜¾ç¤ºæµ‹è¯•',
                            status: 'error',
                            details: `âŒ é”™è¯¯: ${e.message}`
                        });
                    }
                }, 200);
            };

            useEffect(() => {
                // é¡µé¢åŠ è½½åè‡ªåŠ¨è¿è¡Œæµ‹è¯•
                setTimeout(runTests, 1000);
            }, []);

            return (
                <div className="debug-container">
                    <Title level={2} style={{ textAlign: 'center', color: '#667eea', marginBottom: '40px' }}>
                        ğŸ” è‹±è¯­æ°´å¹³é€‰æ‹©å™¨è°ƒè¯•å·¥å…·
                    </Title>

                    <div className="debug-section">
                        <div className="debug-title">æµ‹è¯•ç”¨é€‰æ‹©å™¨</div>
                        <Select
                            className="level-selector"
                            style={{ width: '100%' }}
                            placeholder="è¯·é€‰æ‹©æ‚¨çš„è‹±è¯­æ°´å¹³"
                            value={englishLevel}
                            onChange={(value) => {
                                setEnglishLevel(value);
                                addTestResult({
                                    test: 'é€‰æ‹©å™¨äº¤äº’',
                                    status: 'success',
                                    details: `âœ… æˆåŠŸé€‰æ‹©: ${value}`
                                });
                            }}
                            onDropdownVisibleChange={(visible) => {
                                setIsDropdownOpen(visible);
                                addTestResult({
                                    test: 'ä¸‹æ‹‰æ¡†çŠ¶æ€å˜åŒ–',
                                    status: 'success',
                                    details: `âœ… ä¸‹æ‹‰æ¡†${visible ? 'æ‰“å¼€' : 'å…³é—­'}`
                                });
                            }}
                            size="large"
                        >
                            {levelOptions.map(option => (
                                <Option key={option.value} value={option.value}>
                                    <div>
                                        <div style={{ fontWeight: '600' }}>{option.label}</div>
                                        <div style={{ fontSize: '12px', color: '#718096' }}>{option.description}</div>
                                    </div>
                                </Option>
                            ))}
                        </Select>
                        
                        <div style={{ marginTop: '16px' }}>
                            <Text strong>å½“å‰é€‰æ‹©: </Text>
                            <Text>{englishLevel || 'æ— '}</Text>
                            <br />
                            <Text strong>ä¸‹æ‹‰æ¡†çŠ¶æ€: </Text>
                            <Text>{isDropdownOpen ? 'æ‰“å¼€' : 'å…³é—­'}</Text>
                        </div>
                    </div>

                    <div className="debug-section">
                        <div className="debug-title">æ§åˆ¶é¢æ¿</div>
                        <Space>
                            <Button type="primary" onClick={runTests}>
                                ğŸ”„ é‡æ–°è¿è¡Œæµ‹è¯•
                            </Button>
                            <Button onClick={() => setTestResults([])}>
                                ğŸ—‘ï¸ æ¸…ç©ºç»“æœ
                            </Button>
                            <Button 
                                onClick={() => {
                                    const selector = document.querySelector('.ant-select-selector');
                                    if (selector) selector.click();
                                }}
                            >
                                ğŸ‘† æ‰‹åŠ¨ç‚¹å‡»é€‰æ‹©å™¨
                            </Button>
                        </Space>
                    </div>

                    <div className="debug-section">
                        <div className="debug-title">æµ‹è¯•ç»“æœ</div>
                        {testResults.length === 0 ? (
                            <Text type="secondary">ç­‰å¾…æµ‹è¯•ç»“æœ...</Text>
                        ) : (
                            testResults.map((result, index) => (
                                <div 
                                    key={index}
                                    className={`test-result ${result.status === 'success' ? 'test-success' : 'test-error'}`}
                                >
                                    <strong>[{result.time}] {result.test}:</strong> {result.details}
                                </div>
                            ))
                        )}
                    </div>

                    <div className="debug-section">
                        <div className="debug-title">ç³»ç»Ÿä¿¡æ¯</div>
                        <Row gutter={[16, 16]}>
                            <Col span={12}>
                                <Text strong>æµè§ˆå™¨: </Text>
                                <Text>{navigator.userAgent.split(' ')[0]}</Text>
                            </Col>
                            <Col span={12}>
                                <Text strong>å±å¹•å°ºå¯¸: </Text>
                                <Text>{window.screen.width} x {window.screen.height}</Text>
                            </Col>
                            <Col span={12}>
                                <Text strong>çª—å£å°ºå¯¸: </Text>
                                <Text>{window.innerWidth} x {window.innerHeight}</Text>
                            </Col>
                            <Col span={12}>
                                <Text strong>Ant Design: </Text>
                                <Text>v5.26.5 (CDN)</Text>
                            </Col>
                        </Row>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<DebugApp />, document.getElementById('root'));
    </script>
</body>
</html> 